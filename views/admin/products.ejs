
<%- include('navbar.ejs') %>

<!-- Custom CSS for enhanced styling -->
<style>
    .form-container {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 2rem 0;
    }
    .form-card {
        background: white;
        border-radius: 15px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        overflow: hidden;
        border: none;
    }
    .form-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 2rem;
        text-align: center;
    }
    .form-header h2 {
        margin: 0;
        font-weight: 600;
        font-size: 1.8rem;
    }
    .form-header p {
        margin: 0.5rem 0 0 0;
        opacity: 0.9;
    }
    .form-body {
        padding: 2.5rem;
    }
    .form-group {
        margin-bottom: 1.5rem;
    }
    .form-label {
        font-weight: 600;
        color: #333;
        margin-bottom: 0.5rem;
        display: block;
    }
    .form-control {
        border: 2px solid #e9ecef;
        border-radius: 8px;
        padding: 0.75rem 1rem;
        font-size: 0.95rem;
        transition: all 0.3s ease;
    }
    .form-control:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
    }
    .form-control.is-invalid {
        border-color: #dc3545;
    }
    .invalid-feedback {
        display: block;
        width: 100%;
        margin-top: 0.25rem;
        font-size: 0.875rem;
        color: #dc3545;
    }
    .btn-submit {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        border-radius: 8px;
        padding: 0.75rem 2rem;
        font-weight: 600;
        font-size: 1rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    .btn-submit:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }
    .btn-submit:active {
        transform: translateY(0);
    }
    .required {
        color: #dc3545;
    }
    .form-section {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
    }
    .form-section h5 {
        color: #495057;
        margin-bottom: 1rem;
        font-weight: 600;
        border-bottom: 2px solid #dee2e6;
        padding-bottom: 0.5rem;
    }
    .file-input-wrapper {
        position: relative;
        overflow: hidden;
        display: inline-block;
        width: 100%;
    }
    .file-input-wrapper input[type=file] {
        position: absolute;
        left: -9999px;
    }
    .file-input-label {
        display: block;
        padding: 0.75rem 1rem;
        background: #f8f9fa;
        border: 2px dashed #dee2e6;
        border-radius: 8px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .file-input-label:hover {
        background: #e9ecef;
        border-color: #667eea;
    }
    .file-input-label i {
        margin-right: 0.5rem;
        color: #667eea;
    }
</style>

<div class="form-container">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-xl-6">
                <div class="form-card">
                    <div class="form-header">
                        <h2><i class="fas fa-plus-circle me-2"></i>Add New Product</h2>
                        <!-- <p>Fill in the details below to add a new product to your store</p> -->
                    </div>
                    
                    <div class="form-body">
                        <form action="/admin/save_product" method="post" enctype="multipart/form-data" id="productForm" novalidate>
                            
                            <!-- Basic Information Section -->
                            <div class="form-section">
                                <h5><i class="fas fa-info-circle me-2"></i>Basic Information</h5>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="category_id" class="form-label">
                                                Select Category <span class="required">*</span>
                                            </label>
                                            <select name="category_id" id="category_id" class="form-control" required>
                                                <option value="">Choose a category...</option>
                                                <% for (var i=0; i<categories.length; i++) { %>
                                                    <option value="<%= categories[i].category_id %>"><%= categories[i].category_name %></option>
                                                <% } %>
                                            </select>
                                            <div class="invalid-feedback">Please select a category.</div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="product_name" class="form-label">
                                                Product Name <span class="required">*</span>
                                            </label>
                                            <input type="text" name="product_name" id="product_name" 
                                                   placeholder="Enter product name" class="form-control" required>
                                            <div class="invalid-feedback">Please enter a product name.</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="product_brand" class="form-label">Product Brand</label>
                                            <input type="text" name="product_brand" id="product_brand" 
                                                   placeholder="Enter brand name" class="form-control">
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="product_colors" class="form-label">Product Colors</label>
                                            <input type="text" name="product_colors" id="product_colors" 
                                                   placeholder="e.g., Red, Blue, Green" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="product_details" class="form-label">Product Details</label>
                                    <textarea name="product_details" id="product_details" rows="3" 
                                              placeholder="Enter detailed product description" class="form-control"></textarea>
                                </div>
                            </div>
                            
                            <!-- Media Section -->
                            <div class="form-section">
                                <h5><i class="fas fa-image me-2"></i>Product Image</h5>
                                
                                <div class="form-group">
                                    <label for="product_main_image" class="form-label">
                                        Product Main Image <span class="required">*</span>
                                    </label>
                                    <div class="file-input-wrapper">
                                        <input type="file" name="product_main_image" id="product_main_image" 
                                               class="form-control" accept="image/*" required>
                                        <label for="product_main_image" class="file-input-label">
                                            <i class="fas fa-cloud-upload-alt"></i>
                                            <span id="file-name">Choose an image file...</span>
                                        </label>
                                    </div>
                                    <div class="invalid-feedback">Please select a product image.</div>
                                    <small class="form-text text-muted">Supported formats: JPG, PNG, GIF (Max size: 5MB)</small>
                                </div>
                            </div>
                            
                            <!-- Product Settings Section -->
                            <div class="form-section">
                                <h5><i class="fas fa-cog me-2"></i>Product Settings</h5>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="is_highlighted" class="form-label">Is Highlighted</label>
                                            <select name="is_highlighted" id="is_highlighted" class="form-control">
                                                <option value="No">No</option>
                                                <option value="Yes">Yes</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="is_most_selling" class="form-label">Is Most Selling</label>
                                            <select name="is_most_selling" id="is_most_selling" class="form-control">
                                                <option value="No">No</option>
                                                <option value="Yes">Yes</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Submit Button -->
                            <div class="text-center mt-4">
                                <button type="submit" class="btn btn-submit btn-lg">
                                    <i class="fas fa-save me-2"></i>Save Product
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS and Custom Validation -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // File input handling
    document.getElementById('product_main_image').addEventListener('change', function(e) {
        const fileName = e.target.files[0] ? e.target.files[0].name : 'Choose an image file...';
        document.getElementById('file-name').textContent = fileName;
    });
    
    // Form validation
    (function() {
        'use strict';
        window.addEventListener('load', function() {
            var forms = document.getElementsByClassName('needs-validation');
            var validation = Array.prototype.filter.call(forms, function(form) {
                form.addEventListener('submit', function(event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
    
    // Add Bootstrap validation classes
    document.getElementById('productForm').classList.add('needs-validation');
</script>
<%- include('footer.ejs') %>

